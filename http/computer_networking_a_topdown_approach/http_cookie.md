# http   
## 持久连接和非持久连接
- 非持久连接     
一个TCP连接只传送一条http请求和一条htt相应，传送之后就关闭   
- 持久连接   
一个TCP连接在传送http请求和相应之后不关闭，直到超过一段时间没有请求才关闭    
## Cookies   
http服务器是不记录客户端状态的，这样设计简化服务器设计，而且允许开发出更高性能的服务器来支持并发。但是， 一个站点却想识别用户，无论是因为服务器想限制用户访问还是因为服务器想为不同用户提供不同服务。http使用Cookies来跟踪用户。Cookies技术有四部分组成：     
   
- http请求报文中的cookie头部行    
- http响应报文中的cookie头部行    
- 用户浏览器管理的cookie文件  
- web站点后端数据库    
### 举例      
1. 当用户访问某个站点时（比如亚马逊），服务器创建一个唯一用户识别码，并在后台数据库中以用户识别码为索引创建一个条目，web服务器在响应报文的头部加入`Set-cookie`字段，其中包含这个用户识别码    
2. 浏览器收到http响应报文后，将`Set-cookis`与服务器的主机名加入它所管理的cookie文件中     
3. 当浏览器再次请求数据时，先查询cookie文件，提取用户识别码，并将它放到报文头部     
就是用这种方式，亚马逊服务器可以追踪到用户行文，尽管它无法获取用户具体名字，但是它可以知道相应的用户识别码对应的访问次序和访问时间。亚马逊也使用cookie技术提供购物车服务，通过保存用户购物清单，最后一并付款。         
当再次访问亚马逊网站时，通过访问记录向用户推荐商品。
